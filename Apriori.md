## Apriori算法


关联规则挖掘是数据挖掘中的一个非常重要的研究方向，也是一个由来已久的话题，它的主要任务就是设法发现事物之间的内在联系。

> 参考： https://www.cnblogs.com/qwertWZ/p/4510857.html#_label1
> 参考： http://blog.csdn.net/lizhengnanhua/article/details/9061755

在电商行业里，有一个著名的公式：**销售额=UV * 转化率 * 客单价**。

而提高客单价的一个有效手段就是关联销售或者叫交叉销售（cross-selling）。

常见的产品形态就是组合产品、套餐搭配、配件中心等。

而不同的商品如何搭配组合才能激发用户最大的购买欲望就是一个关键的问题。

Apriori算法是最常用的关联规则挖掘算法。Apriori算法的原理就是说如果某个项是频繁的，那么它的所有子集也是频繁的。

也就是说，如果一个项是非频繁的，那么它的所有超集也是非频繁的


假设目前宠物商店的交易系统中只有下表1中的几张顾客购物清单。

> 表1 顾客购物清单

| 交易订单号           | 顾客购物清单|
| 001                |鸟、鸟笼、鸟食、猫粮、猫砂|
|002                |鱼食、鸟、鸟笼|
|003	            |猫粮、狗粮、宠物玩具|

|004	            |鸟、鸟笼、鸟食|

|005	            |猫粮、猫砂、宠物玩具|

教程标题| 主要内容
-------|----------
关于Markdown | 简介Markdown，Markdown的优缺点
Markdown基础 | Markdown的**基本语法**，格式化文本、代码、列表、链接和图片、分割线、转义符等
Markdown表格和公式 | Markdown的**扩展语法**，表格、公式

**我们的目标是利用过去顾客已购买商品的历史信息作为参考，推荐他们可能感兴趣的其他商品。**

> 因此在这里，宠物商店的管理者经过仔细考虑和讨论，确定只要一个商品组合的购买比例占到订单交易笔数的40%（即支持度），即可认为该商品组合中的商品集合是具有较强的购买关联性。
> 因此，如果顾客在购物篮中加入了组合其中的一种商品，则系统就会立刻将组合中的其他商品推荐给顾客。

**下面模拟Apriori算法完成这项工作：**

（1）计算单项商品的频繁项集L[1] 
    首先要找到单项商品的候选商品频繁项集C[1]，然后过滤掉其中支持度小于40%的商品频繁项集从而得到L[1]，如表2所示。 

> 表2 计算频繁项集L[1]

|商品频繁项集C[1]|	存在的交易订单号|支持度|	是够保留该商品|
|鸟	|001，002，004	|3/5 x 100% > 40%	|是|
|鸟笼	|001，002，004|	3/5 x 100% > 40%	|是|
|鸟食	|001，004	|2/5 x 100% = 40%	|是|
|猫粮	|001，003，005|	3/5 x 100% > 40%	|是|
|猫砂	|001，005	|2/5 x 100% = 40%	|是|
|鱼食	|002	|1/5 x 100% < 40%	|否|
|狗粮	|003	|1/5 x 100% < 40%	|否|
|宠物玩具	|003,005|	2/5 x 100% = 40%|	是|

得到频繁项集L[1] = {{鸟}，{鸟笼}，{鸟食}，{猫粮}，{猫砂}，{宠物玩具}}。

```